<!DOCTYPE html>
<html>
<head>
	<title>Hangman!</title>

	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>
<body>
	<div id="lettersHit">
		<p>Press a letter to start playing.</p>
	</div>
	<div id="counter">
		<p>Tries Left: 9</p>
	</div>
	<div id="lettersMissed">
		<p>Letters Missed</p>
	</div>

		<script type="text/javascript">

		var guessHist=[];
		var missHist=[];
		var	wordToGuess="placeholder";
		var prevWordToGuess="placeholder";
		var wordToGuessArr=["final fantasy vii", "super smash brothers"];
		var wordToGuessRevealed;
		var counter=9;
		var k=0;
		var missIndex=0;
		var hitHist=[];
		var hitIndex=0;
		var alphabet = "abcdefghijklmnopqrstuvwxyz";
		var clearBoard=true;
		var winCheck="placeholder";


		//check to see if user won. put the word into an array. make sure no repeat words are chosen

		if(clearBoard==true){
			do{
				wordToGuess=wordToGuessArr[Math.floor(Math.random()*wordToGuessArr.length)].toLowerCase();
				console.log(wordToGuess);
			}while(prevWordToGuess==wordToGuess)
				prevWordToGuess=wordToGuessArr;
				clearBoard=false;

		}

		//store the word into an array that will be displayed
		var wordToGuessRevealedArr=[];
			for(i=0;i<wordToGuess.length;i++){
				if(wordToGuess.charAt(i)!=' '){
					wordToGuessRevealedArr[i]='_';
				}
				else{
					wordToGuessRevealedArr[i]=' ';
				}
			}

		
		//user guesses a letter

		document.onkeyup = function(event){

			var guessValidation=false;

			//store guess
			var Guess = String.fromCharCode(event.keyCode).toLowerCase();

			//check to see if Guess is a letter and then if it has been guessed already
			if(alphabet.indexOf(Guess)>=0){
				if(guessHist.length!=0){
					for(i=0;i<guessHist.length;i++){
						if(guessHist[i]==Guess){
							break;
						}
				//store the guess in the history to check next time
						else if(i==guessHist.length-1){
							guessHist[k]=Guess;
							k++;
							guessValidation=true;
						}
					}
				}else{
					guessHist[k]=Guess;
					k++;
					guessValidation=true
				}
			}
		if(guessValidation==true){
			console.log("out of validation!");

			//check to see if letter is in the word

			var hitcount=0;

			for(i=0;i<wordToGuess.length;i++){
				if(wordToGuess.charAt(i)==Guess){
					wordToGuessRevealedArr[i]=Guess;
					hitcount++;
				}
			}

				if(hitcount==0){
			//store the letter in missHist to display misses. abc order for display
					missHist[missIndex]=Guess;
					missHist.sort();
					missIndex++;
					counter--;
				}
				else{
			//dunno why i did this but why not
					hitHist[hitIndex]=Guess;
					hitHist.sort();
					hitIndex++;
				}

			//check to see if user won the game
			winCheck=wordToGuessRevealedArr.toString();
			winCheck=winCheck.replace(/,/g,'');
			winCheck=winCheck.replace(/_ /g,'');
			//turn clear board on if user won
			if(winCheck==wordToGuess){
				clearBoard=true;
			}

			//display users "hits" if game is still on
			if(clearBoard==false){
			wordToGuessRevealed=wordToGuessRevealedArr.toString();
			wordToGuessRevealed=wordToGuessRevealed.replace(/,/g,'');	
			wordToGuessRevealed=wordToGuessRevealed.replace(/_/g,'_ ');
				var lettersHitHTML="<p>"+wordToGuessRevealed+"</p>";
			}
			//display "yay" if user won
 			else if(clearBoard==true){
				var lettersHitHTML="<p>You won! Press another letter to play again!</p>"
			}
			
			//display misses	
				var missHistString=missHist.toString()
				missHistString=missHistString.replace(/,/g,', ')
				var lettersMissedHTML = "<p>"+missHistString+"</p>";

			//the actual queryselectors
			document.querySelector('#lettersHit').innerHTML = lettersHitHTML;
			document.querySelector('#lettersMissed').innerHTML = lettersMissedHTML;
			document.querySelector('#counter').innerHTML= "<p>Tries Left: "+counter+"</p>";
			}
		}
		</script>





</body>
</html>